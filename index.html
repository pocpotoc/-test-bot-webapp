<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Motion — robust deploy (GH Pages)</title>
  <style>
    body {
      margin: 0;
      min-height: 100vh;
      background: #0b0b0b;
      display: grid;
      place-items: center;
      color: #ccc;
      font: 14px system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .dot {
      width: 400px;
      height: 400px;
      border-radius: 50%;
      background: #fff;
    }
    .log {
      position: fixed; left: 10px; bottom: 10px; opacity: .75; white-space: pre-wrap;
      max-width: 92vw; line-height: 1.3;
    }
    /* fallback на случай, если Motion не загрузится совсем */
    @keyframes fallbackPulse { from { transform: scale(1) } to { transform: scale(1.08) } }
    .fallback-anim { animation: fallbackPulse .5s cubic-bezier(.12,.23,.5,1) 2s infinite alternate; }
  </style>
</head>
<body>
  <div class="dot" id="dot"></div>
  <div class="log" id="log"></div>

  <script type="module">
    const dot = document.getElementById('dot');
    const logEl = document.getElementById('log');
    const log = (m) => { console.log(m); logEl.textContent += m + '\n'; };

    // ТВОИ ПАРАМЕТРЫ ИЗ FRAMER:
    const params = {
      duration: 0.5,              // 0.5s
      delay: 2,                   // 2s перед стартом
      repeatDelay: 1,             // 1s между циклами
      ease: [0.12, 0.23, 0.5, 1], // bezier
      repeat: Infinity,
      repeatType: 'mirror'        // Mirror
    };

    async function loadMotion() {
      // 1) пробуем jsDelivr ESM
      try {
        log('Trying jsDelivr ESM…');
        const { animate } = await import('https://cdn.jsdelivr.net/npm/motion@latest/+esm');
        log('Loaded from jsDelivr.');
        return { animate, source: 'jsDelivr ESM' };
      } catch (e) {
        log('jsDelivr ESM failed: ' + e.message);
      }
      // 2) пробуем unpkg ESM
      try {
        log('Trying unpkg ESM…');
        const { animate } = await import('https://unpkg.com/motion@latest/dist/motion.mjs');
        log('Loaded from unpkg.');
        return { animate, source: 'unpkg ESM' };
      } catch (e) {
        log('unpkg ESM failed: ' + e.message);
      }
      // 3) пробуем esm.sh ESM
      try {
        log('Trying esm.sh ESM…');
        const { animate } = await import('https://esm.sh/motion@latest');
        log('Loaded from esm.sh.');
        return { animate, source: 'esm.sh ESM' };
      } catch (e) {
        log('esm.sh ESM failed: ' + e.message);
      }
      // 4) как последний шанс — UMD-глобал
      log('Falling back to UMD global…');
      await new Promise((res, rej) => {
        const s = document.createElement('script');
        s.src = 'https://cdn.jsdelivr.net/npm/motion@latest/dist/motion.js';
        s.onload = res; s.onerror = rej; document.head.appendChild(s);
      }).catch((e) => log('UMD load failed: ' + e.message));
      if (window.Motion && typeof window.Motion.animate === 'function') {
        log('Loaded UMD global Motion.');
        return { animate: window.Motion.animate, source: 'UMD global' };
      }
      return null;
    }

    (async () => {
      const mod = await loadMotion();
      if (!mod) {
        log('Motion not loaded. Enabling CSS fallback.');
        dot.classList.add('fallback-anim');
        return;
      }
      const { animate, source } = mod;
      log('Using source: ' + source);
      // Запускаем твою анимацию
      animate(dot, { scale: [1, 1.08] }, params);
      log('Animation started with delays: delay=2s, repeatDelay=1s.');
    })();
  </script>
</body>
</html>
